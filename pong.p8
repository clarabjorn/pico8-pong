pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
 ball={
	 x=80,
	 y=64,
	 dx=3,
	 dy=2,
	 r=4
	}
	bat1={
	 x=64,
	 y=124,
	 b=34,
	 h=2,
	 spd=2,
	 col=7,
	 point=0,
	 ctrl=0
	}
	bat2={
	 x=64,
	 y=1,
	 b=34,
	 h=2,
	 spd=2,
	 col=7,
	 point=0,
	 ctrl=1
	}
end

function _update()
	ball.x+=ball.dx
	ball.y+=ball.dy	
	
	if ball.dy > 0 then
	 if ball_hit_bat(ball, bat1) then
		 ball.dy=-ball.dy
		 sfx(0)
	 end
	 
	 if ball.y >= 140 then
	 	bat2.point+=1
   sfx(2)
	 	ball.x=64
	 	ball.y=64
  end
	else
	 --tjek kollision med bat2
	 if ball_hit_bat(ball, bat2) then
		 ball.dy=-ball.dy
		 sfx(0)
	 end
	 
	 if ball.y <= -12 then
	 	bat1.point+=1
	 	sfx(2)
	 	ball.x=64
	 	ball.y=64
  end
	end
	
	if ball.x+ball.r>=127
	 or ball.x-ball.r<=0 then
		ball.dx=-ball.dx
		sfx(1)
	end
	update_bat(bat1)
	--update_bat(bat2)
	update_bat_ai(bat2)
end

function _draw()
	cls()
	rect(0,0,127,127,5)
	circfill(ball.x,ball.y,	ball.r,8)
	draw_bat(bat1)
	draw_bat(bat2)
	print(bat2.point,2,2,12)
	print(bat1.point,123,121,12)
end
-->8
--bat

function update_bat(b)
	if btn(⬅️,b.ctrl) then
		b.x-=b.spd
	elseif btn(➡️,b.ctrl) then
	 b.x+=b.spd
	end
	
	if b.x < 0 then
		b.x = 0
	end
	
	if b.x + b.b > 127 then
		b.x = 127 - b.b
	end
end

function draw_bat(b)
	rectfill(
	 b.x,b.y,
	 b.x+b.b,
	 b.y+b.h,
	 b.col)
end
-->8
--collision
function ball_hit_bat(ball, bat)
 local testx = ball.x
 local testy = ball.y
 
 if ball.y< bat.y then
 	testy = bat.y
 elseif ball.y > bat.y+bat.h then
  testy = bat.y+bat.h
 end
 
 if ball.x < bat.x then
  testx = bat.x
 elseif ball.x > bat.x+bat.b then
  testx = bat.x+bat.b
 end
 
 local distx=ball.x-testx
 local disty=ball.y-testy
 
 local distance = sqrt(
 distx*distx+disty*disty)
 
 if distance <= ball.r then
 	return true
 else
  return false
 end
end
-->8
-- ai
function update_bat_ai(bat)
--	 teleport_bat(bat)
  move_bat_to_ball(bat)
 	if bat.x < 0 then
		bat.x = 0
	end
	
	if bat.x + bat.b > 127 then
		bat.x = 127 - bat.b
	end

end

function teleport_bat(bat)
 bat.x = ball.x - (bat.b/2)

end

function move_bat_to_ball(b)
 if b.x + b.b/2 < ball.x then
  b.x += b.spd
 else
  b.x -= b.spd
 
 end 
end


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
50000000000000777777777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000005
50ccc000000000777777777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000005
50c00000000000777777777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000005
50ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
5000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088800000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888888800000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888888800000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888888800000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088800000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc005
5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c005
5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c005
5000000000000000000000000000000000000000000000000077777777777777777777777777777777777000000000000000000000000000000000000000c005
500000000000000000000000000000000000000000000000007777777777777777777777777777777777700000000000000000000000000000000000000ccc05
50000000000000000000000000000000000000000000000000777777777777777777777777777777777770000000000000000000000000000000000000000005
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555

__sfx__
000100000435004350023500335003350043500535006350063500535005350043500435002350023500235001350013500135001350013500135001350023500235002350023500335003350033500335002350
000100003135033350343503435034350353503435031350303502f3502d3502b3502b3502b3502b3502b3502b3502b3502b3502b3502b3502b3502c3502c3502e35030350323503435035350373503835039350
000100002c25029250272502b2502a2502a3502b3502c3502e350303503235033350333503335033350323502d3502b350283502735028350283502735027650296502d650306503265037650396503a65039650
